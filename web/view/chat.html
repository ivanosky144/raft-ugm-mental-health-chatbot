{% extends 'base.html' %}

{% block body %}
<link rel="stylesheet" href="{{ url_for('web.static', filename='css/chat.css') }}">
<script src="{{ url_for('web.static', filename='js/chat.js') }}"></script>

<div class="chat-page">
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>Chatbot Kesehatan Mental</h2>
            <button id="new-chat-btn">+ Obrolan Baru</button>
        </div>
        <div class="conversation-list" id="conversation-list"></div>
    </div>

    <div class="chat-area">
        <div id="chat-window" class="chat-window">
            {% for msg in messages %}
                {% if msg.user_input %}
                <div class="chat-message user">
                    <div class="message">{{ msg.user_input }}</div>
                </div>
                {% endif %}
                <div class="chat-message bot">
                    <div class="message">{{ msg.bot_response }}</div>
                </div>
            {% endfor %}
        </div>

        <form id="chat-form" autocomplete="off">
            <input type="text" id="message-input" placeholder="Tulis pesan Anda..." required>
            <button type="submit">Kirim</button>
        </form>
    </div>
    <button id="toggle-aspect-sidebar-btn" class="toggle-aspect-sidebar-btn">â®ž</button>
    <div class="aspect-sidebar" id="aspect-sidebar">
        <h3>Progres Survei</h3>
        <div id="aspect-list"></div>
    </div>

</div>
{% endblock %}
